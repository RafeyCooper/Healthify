{% extends "layout.html" %}

{% block title %}Appointments - Healthify{% endblock %}

{% block content %}
<style>
    .appt-card { background: var(--card-bg); padding: 18px; border-radius: 14px; box-shadow: var(--shadow); margin-bottom: 14px; }
    .appt-meta { display:flex; gap: 12px; flex-wrap: wrap; color: var(--text-light); }
    .appt-actions { margin-top: 10px; display:flex; gap: 10px; }
    .btn { padding: 8px 14px; border-radius: 10px; border: 1px solid var(--primary-color); color: var(--primary-color); background: transparent; cursor: pointer; text-decoration: none; }
    .btn-primary { background: var(--primary-color); color: #fff; border-color: var(--primary-color); }
</style>

<header>
    <div class="header-title">
        <h1>Your Appointments</h1>
        <p>Upcoming and past bookings.</p>
    </div>
</header>

<div>
    <div style="margin-bottom: 12px;">
        <a class="btn btn-primary" href="{{ url_for('book_appointment') }}">Book New Appointment</a>
    </div>
    {% if appointments %}
        {% for a in appointments %}
            <div class="appt-card">
                <div style="display:flex; justify-content: space-between; align-items:center;">
                    <div>
                        <h3 style="margin:0;">{{ specialties[a.specialty].name }} with {{ a.doctor_name }}</h3>
                        <div class="appt-meta">
                            <span><i class="fas fa-calendar"></i> {{ a.start_at.strftime('%B %d, %Y') }}</span>
                            <span><i class="fas fa-clock"></i> {{ a.start_at.strftime('%I:%M %p') }} - {{ a.end_at.strftime('%I:%M %p') }}</span>
                            <span><i class="fas fa-info-circle"></i> {{ a.status|capitalize }}</span>
                        </div>
                    </div>
                </div>
                {% if a.notes %}
                <p style="margin-top:8px;">Notes: {{ a.notes }}</p>
                {% endif %}
                <div class="appt-actions">
                    <a class="btn" href="{{ url_for('book_appointment', specialty=a.specialty) }}">Reschedule</a>
                </div>
            </div>
        {% endfor %}
    {% else %}
        <div class="appt-card"><p>No appointments yet.</p></div>
    {% endif %}
</div>

{% endblock %}


